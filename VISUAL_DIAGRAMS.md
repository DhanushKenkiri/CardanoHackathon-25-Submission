# ğŸ¨ ParknGo Real-Time System - Visual Flow Diagrams

## System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PARKNGO REAL-TIME SYSTEM                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Raspberry Pi    â”‚  Distance < 10cm detected
â”‚  Ultrasonic      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Sensor          â”‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚    Firebase      â”‚
                                    â”‚  Realtime DB     â”‚
                                    â”‚                  â”‚
                                    â”‚  spot_01:        â”‚
                                    â”‚  {               â”‚
                                    â”‚    occupied:true â”‚
                                    â”‚    median_cm:4.9 â”‚
                                    â”‚    sensor:pi5    â”‚
                                    â”‚  }               â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                       â–¼                       â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  Payment Monitor â”‚   â”‚   React Web UI   â”‚   â”‚  Flask REST API  â”‚
          â”‚  (Python Service)â”‚   â”‚   (Browser)      â”‚   â”‚  (7 AI Agents)   â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                       â”‚
                    â”‚ Every 60 sec          â”‚ Firebase listener
                    â–¼                       â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Payment Verifier â”‚   â”‚ ActiveParkingSession.js      â”‚
          â”‚      Agent       â”‚   â”‚                              â”‚
          â”‚                  â”‚   â”‚ â€¢ Live duration counter      â”‚
          â”‚ Receives 0.2 ADA â”‚   â”‚ â€¢ Charging meter             â”‚
          â”‚ per minute       â”‚   â”‚ â€¢ Progress bar (60s)         â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â€¢ Payment timeline           â”‚
                    â”‚             â”‚ â€¢ TX hashes with links       â”‚
                    â–¼             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  Cardano Preprod â”‚
          â”‚   Blockchain     â”‚
          â”‚                  â”‚
          â”‚  Real TX Hash:   â”‚
          â”‚  a1b2c3d4...     â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”œâ”€â”€â”€â”€â”€â–º Terminal Log (Development)
                    â”‚       "TX Hash: a1b2c3d4..."
                    â”‚
                    â””â”€â”€â”€â”€â”€â–º Firebase Storage
                            realtime_payments/{session_id}/{n}
```

---

## Detailed Payment Flow

```
TIME:     0s          30s         60s         90s         120s
          â”‚           â”‚           â”‚           â”‚           â”‚
SENSOR:   â”‚ Vehicle   â”‚           â”‚           â”‚           â”‚
          â”‚ Detected  â”‚           â”‚           â”‚           â”‚
          â–¼           â”‚           â”‚           â”‚           â”‚
FIREBASE: occupied    â”‚           â”‚           â”‚           â”‚
          = true      â”‚           â”‚           â”‚           â”‚
          â”‚           â”‚           â”‚           â”‚           â”‚
          â–¼           â”‚           â”‚           â”‚           â”‚
MONITOR:  Start       â”‚           â”‚           â”‚           â”‚
          Session     â”‚           â”‚           â”‚           â”‚
          â”‚           â”‚           â”‚           â”‚           â”‚
          â–¼           â”‚           â–¼           â–¼           â–¼
PAYMENT:  Payment #1  â”‚           Payment #2  Payment #3  Payment #4
          0.2 ADA     â”‚           0.2 ADA     0.2 ADA     0.2 ADA
          â”‚           â”‚           â”‚           â”‚           â”‚
          â–¼           â”‚           â–¼           â–¼           â–¼
CARDANO:  TX          â”‚           TX          TX          TX
          a1b2c3d4... â”‚           f9e8d7c6... 3c4d5e6f... 7a8b9c0d...
          â”‚           â”‚           â”‚           â”‚           â”‚
          â–¼           â”‚           â–¼           â–¼           â–¼
TERMINAL: âœ… TX Hash  â”‚           âœ… TX Hash  âœ… TX Hash  âœ… TX Hash
          displayed   â”‚           displayed   displayed   displayed
          â”‚           â”‚           â”‚           â”‚           â”‚
          â–¼           â”‚           â–¼           â–¼           â–¼
UI:       Charging    â”‚           Meter       Meter       Meter
          View        â”‚           Updates:    Updates:    Updates:
          Shown       â”‚           0.2 ADA     0.4 ADA     0.6 ADA
```

---

## UI State Machine

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UI STATE MACHINE                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Landing Page    â”‚
                    â”‚  (/)             â”‚
                    â”‚                  â”‚
                    â”‚  â€¢ Hero section  â”‚
                    â”‚  â€¢ Features      â”‚
                    â”‚  â€¢ How it works  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Click "Launch App"
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                           â”‚
        â”‚        Normal Parking View                â”‚
        â”‚        (/app)                             â”‚
        â”‚                                           â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
        â”‚  â”‚  3D Parking Lot (Sketchfab)     â”‚     â”‚
        â”‚  â”‚                                 â”‚     â”‚
        â”‚  â”‚  â€¢ Zone A/B/C clickable         â”‚     â”‚
        â”‚  â”‚  â€¢ Real-time availability       â”‚     â”‚
        â”‚  â”‚  â€¢ Color-coded overlays         â”‚     â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
        â”‚                                           â”‚
        â”‚  Sidebar:                                 â”‚
        â”‚  â€¢ Selected spot info                     â”‚
        â”‚  â€¢ Connect wallet                         â”‚
        â”‚  â€¢ Agent executor                         â”‚
        â”‚  â€¢ Booking CTA                            â”‚
        â”‚                                           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                   â–²
                    â”‚                   â”‚
       spot_01.occupied = true      spot_01.occupied = false
                    â”‚                   â”‚
                    â–¼                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                           â”‚
        â”‚    Active Parking Session View            â”‚
        â”‚    (Uber-Style Charging UI)               â”‚
        â”‚                                           â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
        â”‚  â”‚ ğŸŸ¢ Parking Active (Pulsing)     â”‚     â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
        â”‚                                           â”‚
        â”‚  Spot Info:                               â”‚
        â”‚  â€¢ spot_01                                â”‚
        â”‚  â€¢ Vehicle: TS09EA1234                    â”‚
        â”‚  â€¢ Duration: 2m 15s (live counter)        â”‚
        â”‚                                           â”‚
        â”‚  Charging Meter:                          â”‚
        â”‚  â€¢ âš¡ 0.40 ADA                            â”‚
        â”‚  â€¢ 2 payments â€¢ 0.2 ADA/min               â”‚
        â”‚  â€¢ [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] Next in 43s               â”‚
        â”‚                                           â”‚
        â”‚  Payment Timeline:                        â”‚
        â”‚  â€¢ âœ… Payment #2 â€¢ TX: a1b2c3d4...        â”‚
        â”‚  â€¢ âœ… Payment #1 â€¢ TX: f9e8d7c6...        â”‚
        â”‚                                           â”‚
        â”‚  [   End Parking Session   ]              â”‚
        â”‚                                           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Firebase Data Structure

```
parkngo-ai (Firebase Project)
â”‚
â”œâ”€â”€ parking_spots/
â”‚   â””â”€â”€ spot_01/
â”‚       â”œâ”€â”€ occupied: true
â”‚       â”œâ”€â”€ median_cm: 4.9
â”‚       â”œâ”€â”€ sensor_id: "pi5_sensor_01"
â”‚       â””â”€â”€ last_seen: 1764425380
â”‚
â”œâ”€â”€ active_sessions/
â”‚   â””â”€â”€ session_spot_01_1732892445/
â”‚       â”œâ”€â”€ session_id: "session_spot_01_1732892445"
â”‚       â”œâ”€â”€ spot_id: "spot_01"
â”‚       â”œâ”€â”€ vehicle_id: "TS09EA1234"
â”‚       â”œâ”€â”€ start_time: 1732892445
â”‚       â”œâ”€â”€ status: "active"
â”‚       â”œâ”€â”€ total_charged_lovelace: 400000
â”‚       â”œâ”€â”€ payment_count: 2
â”‚       â”œâ”€â”€ last_payment_tx: "a1b2c3d4..."
â”‚       â””â”€â”€ last_payment_time: 1732892565
â”‚
â”œâ”€â”€ realtime_payments/
â”‚   â””â”€â”€ session_spot_01_1732892445/
â”‚       â”œâ”€â”€ 1/
â”‚       â”‚   â”œâ”€â”€ payment_id: "payment_..._1"
â”‚       â”‚   â”œâ”€â”€ amount_ada: 0.2
â”‚       â”‚   â”œâ”€â”€ amount_lovelace: 200000
â”‚       â”‚   â”œâ”€â”€ tx_hash: "a1b2c3d4e5f6..."
â”‚       â”‚   â”œâ”€â”€ status: "confirmed"
â”‚       â”‚   â””â”€â”€ timestamp: "2025-11-29T14:30:45Z"
â”‚       â”‚
â”‚       â””â”€â”€ 2/
â”‚           â”œâ”€â”€ payment_id: "payment_..._2"
â”‚           â”œâ”€â”€ tx_hash: "f9e8d7c6b5a4..."
â”‚           â””â”€â”€ ...
â”‚
â””â”€â”€ completed_sessions/
    â””â”€â”€ (moved here when session ends)
```

---

## Component Interaction Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   COMPONENT INTERACTIONS                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HomePage.js     â”‚
â”‚                 â”‚
â”‚ useEffect(() => â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Listen to:    â”‚         â”‚
â”‚   spot_01       â”‚         â”‚ Firebase
â”‚ )               â”‚         â”‚ Realtime
â”‚                 â”‚         â”‚ Sync
â”‚ if (occupied) { â”‚         â”‚
â”‚   <ActiveSess/> â”‚         â”‚
â”‚ } else {        â”‚         â”‚
â”‚   <Normal/>     â”‚         â”‚
â”‚ }               â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
                            â”‚
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ActiveParking    â”‚         â”‚
â”‚Session.js       â”‚         â”‚
â”‚                 â”‚         â”‚
â”‚ useEffect(() => â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Listen to:    â”‚         â”‚
â”‚   active_sess   â”‚         â”‚
â”‚   payments      â”‚         â”‚
â”‚ )               â”‚         â”‚
â”‚                 â”‚         â”‚
â”‚ Every 1 sec:    â”‚         â”‚
â”‚ â€¢ Update timer  â”‚         â”‚
â”‚ â€¢ Update progressâ”‚        â”‚
â”‚                 â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
                            â”‚
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ realtime_       â”‚         â”‚
â”‚ payment_        â”‚         â”‚
â”‚ monitor.py      â”‚         â”‚
â”‚                 â”‚         â”‚
â”‚ on_spot_change()â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Firebase
â”‚   â†“             â”‚         â”‚ Listener
â”‚ start_session() â”‚         â”‚
â”‚   â†“             â”‚         â”‚
â”‚ Every 60s:      â”‚         â”‚
â”‚ trigger_payment â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Write to
â”‚   â†“             â”‚           Firebase
â”‚ Cardano TX      â”‚
â”‚   â†“             â”‚
â”‚ Store TX hash   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Firebase
â”‚   â†“             â”‚            realtime_payments/
â”‚ Print to        â”‚
â”‚ terminal        â”‚
â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Terminal Output Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TERMINAL OUTPUT                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Event: Vehicle Detected
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸš— PARKING SPOT UPDATE - 2025-11-29 14:30:45
================================================================================
Spot ID:      spot_01
Sensor:       pi5_sensor_01
Occupied:     True
Distance:     4.9 cm
================================================================================

ğŸŸ¢ STARTING CHARGING SESSION
   Session ID: session_spot_01_1732892445


Event: Payment Triggered (Every 60s)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ’° PAYMENT AGENT TRIGGERED - Payment #1
================================================================================
Time: 2025-11-29 14:30:45
Session: session_spot_01_1732892445

ğŸ“Š Payment Details:
   Amount: 0.2 ADA (200,000 Lovelace)

â›“ï¸  Executing Cardano Blockchain Transaction...

âœ… TRANSACTION SUCCESSFUL
================================================================================
TX Hash: a1b2c3d4e5f6789012345678901234567890123456789012345678901234
Amount:  0.2 ADA
Agent:   Payment Verifier
Explorer: https://preprod.cardanoscan.io/transaction/a1b2c3d4...
================================================================================

ğŸ” Verifying payment...
âœ… Payment verified | Fraud Score: 10/100


Event: Vehicle Exits
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”´ ENDING CHARGING SESSION
   Session ID: session_spot_01_1732892445
   Duration: 5.2 minutes
   Total Payments: 6
   Total Charged: 1.2 ADA
```

---

## Browser UI Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 BROWSER UI UPDATES                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Time: 0s (Vehicle enters)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ¢ Parking Active - Charging Per Minute â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                          â”‚
â”‚ ğŸ…¿ï¸ spot_01                               â”‚
â”‚ Duration: 0m 0s                          â”‚
â”‚                                          â”‚
â”‚ âš¡ Live Charging                          â”‚
â”‚ 0.00 ADA                                 â”‚
â”‚ 0 payments â€¢ 0.2 ADA per minute          â”‚
â”‚ [â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] Next payment in 60s         â”‚
â”‚                                          â”‚
â”‚ ğŸ’° Payment History                       â”‚
â”‚ (First payment processing...)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Time: 30s
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ¢ Parking Active                        â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                          â”‚
â”‚ Duration: 0m 30s  â† Live counter         â”‚
â”‚                                          â”‚
â”‚ 0.20 ADA  â† Payment #1 completed         â”‚
â”‚ 1 payment                                â”‚
â”‚ [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘] Next payment in 30s         â”‚
â”‚                                          â”‚
â”‚ âœ… Payment #1 â€¢ 14:30:45                 â”‚
â”‚    0.2 ADA (200,000 Lovelace)            â”‚
â”‚    TX: a1b2c3d4...e5f6                   â”‚
â”‚    View on CardanoScan â†’                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Time: 90s (After payment #2)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ¢ Parking Active                        â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                          â”‚
â”‚ Duration: 1m 30s                         â”‚
â”‚                                          â”‚
â”‚ 0.40 ADA  â† Total increases              â”‚
â”‚ 2 payments                               â”‚
â”‚ [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘] Next payment in 30s         â”‚
â”‚                                          â”‚
â”‚ âœ… Payment #2 â€¢ 14:31:45  â† New entry    â”‚
â”‚    TX: f9e8d7c6...b5a4                   â”‚
â”‚                                          â”‚
â”‚ âœ… Payment #1 â€¢ 14:30:45                 â”‚
â”‚    TX: a1b2c3d4...e5f6                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Technology Stack Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  TECHNOLOGY STACK                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Frontend Layer
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   React      â”‚   Firebase   â”‚  Framer      â”‚   Mesh SDK   â”‚
â”‚   18.2.0     â”‚   SDK        â”‚  Motion      â”‚   (Cardano)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚              â”‚              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                     Web Browser
                          â”‚

Backend Layer
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Flask      â”‚   Firebase   â”‚  pycardano   â”‚  Gemini AI   â”‚
â”‚   (Python)   â”‚   Admin SDK  â”‚  (Blockchain)â”‚  (Agents)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚              â”‚              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                 Python Services


Data Layer
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Firebase Realtime    â”‚    Cardano Preprod     â”‚
â”‚       Database         â”‚      Blockchain        â”‚
â”‚                        â”‚                        â”‚
â”‚  â€¢ parking_spots       â”‚  â€¢ Transaction hash    â”‚
â”‚  â€¢ active_sessions     â”‚  â€¢ Payment records     â”‚
â”‚  â€¢ realtime_payments   â”‚  â€¢ On-chain verificationâ”‚
â”‚  â€¢ completed_sessions  â”‚  â€¢ Immutable ledger    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Hardware Layer
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Raspberry Pi 5                             â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Ultrasonic     â”‚â”€â”€â”€â–¶â”‚  Python Script   â”‚â”€â”€â”       â”‚
â”‚  â”‚  Sensor         â”‚    â”‚  (Distance Check)â”‚  â”‚       â”‚
â”‚  â”‚  (HC-SR04)      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚       â”‚
â”‚                                                â”‚       â”‚
â”‚                                                â–¼       â”‚
â”‚                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚                                    â”‚  Firebase Update â”‚â”‚
â”‚                                    â”‚  occupied: true  â”‚â”‚
â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## File Structure Diagram

```
masumi/
â”‚
â”œâ”€â”€ ğŸ”¥ REAL-TIME SYSTEM (NEW)
â”‚   â”œâ”€â”€ realtime_payment_monitor.py    â­ Core payment service
â”‚   â”œâ”€â”€ start_realtime_system.sh       â­ Startup automation
â”‚   â”œâ”€â”€ test_start_parking.sh          â­ Test trigger
â”‚   â”œâ”€â”€ test_end_parking.sh            â­ Test end
â”‚   â”œâ”€â”€ REALTIME_PAYMENT_SYSTEM.md     â­ Documentation
â”‚   â”œâ”€â”€ IMPLEMENTATION_SUMMARY.md      â­ Tech details
â”‚   â””â”€â”€ README_REALTIME.md             â­ Quick start
â”‚
â”œâ”€â”€ ğŸŒ FRONTEND (UPDATED)
â”‚   â””â”€â”€ frontend/
â”‚       â””â”€â”€ src/
â”‚           â”œâ”€â”€ firebase.js            â­ Firebase config
â”‚           â”œâ”€â”€ components/
â”‚           â”‚   â”œâ”€â”€ ActiveParkingSession.js â­ Charging UI
â”‚           â”‚   â”œâ”€â”€ AgentExecutor.js
â”‚           â”‚   â””â”€â”€ ...
â”‚           â””â”€â”€ pages/
â”‚               â”œâ”€â”€ LandingPage.js     â­ Professional landing
â”‚               â””â”€â”€ HomePage.js        â­ Dynamic states
â”‚
â”œâ”€â”€ ğŸ”§ BACKEND
â”‚   â”œâ”€â”€ app.py                         Flask API
â”‚   â”œâ”€â”€ firebase_listener.py           Event orchestration
â”‚   â””â”€â”€ agents/
â”‚       â”œâ”€â”€ payment_verifier.py        â­ Used every minute
â”‚       â”œâ”€â”€ spot_finder.py
â”‚       â””â”€â”€ ...
â”‚
â””â”€â”€ ğŸ’¾ DATA
    â”œâ”€â”€ .env                           Credentials
    â”œâ”€â”€ CARDANO_WALLETS_PREPROD.json   Customer wallet
    â””â”€â”€ secrets/
        â””â”€â”€ parkngo-firebase-adminsdk.json
```

---

Built with â¤ï¸ for real-time, real-world parking payments
**100% Real. Zero Mocks. Production Ready.**
